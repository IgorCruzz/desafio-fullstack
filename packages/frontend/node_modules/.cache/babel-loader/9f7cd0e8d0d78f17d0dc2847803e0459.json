{"ast":null,"code":"var _jsxFileName = \"/Users/viniciusprudencio/Desktop/development/other-programs/desafio/desafio-fullstack/packages/frontend/src/presentation/pages/AccountLog/index.tsx\";\nimport React, { useRef, useContext, useCallback } from 'react';\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\nimport { Form } from '@unform/web';\nimport { BsFillPersonFill } from 'react-icons/bs';\nimport { MdAccountCircle } from 'react-icons/md';\nimport { MdEmail } from 'react-icons/md';\nimport { FaUnlockAlt } from 'react-icons/fa';\nimport { FiMail, FiLock } from 'react-icons/fi';\nimport logoImg from \"../../assets/logo/internal-logo/profitfy_logo.svg\";\nimport airplaneIcon from \"../../assets/images/icons/paper-airplane.svg\";\nimport Brazil from \"../../assets/images/icons/brazil.svg\";\nimport * as Yup from 'yup';\nimport api from '../../../infra/services/http/api';\nimport { useHistory } from 'react-router-dom';\nimport { ThemeContext } from 'styled-components';\nimport getValidationErrors from '../../../validation/yup/getValidationErrors';\nimport Input from '../../components/Input';\nimport InputSignUp from '../../components/InputSignUp';\nimport InputMasked from '../../components/InputMasked';\nimport Text from '../../components/Text';\nimport { Container, Title, Content, Button } from './styles';\n\nconst AccountLog = () => {\n  const {\n    signIn\n  } = useAuth();\n  const history = useHistory();\n  const {\n    addToast\n  } = useToast();\n  const formRef = useRef(null);\n  const theme = useContext(ThemeContext).colors;\n\n  const $ = elem => window.document.querySelector(elem);\n\n  const handleFormPanelTwo = async () => {\n    var _$, _$2, _$3;\n\n    const formPanelTwo = $('.form-panel.two');\n    const panelTwo = formPanelTwo === null || formPanelTwo === void 0 ? void 0 : formPanelTwo.scrollHeight;\n    const Form = $('.form');\n    const formHeight = Form === null || Form === void 0 ? void 0 : Form.clientHeight;\n    (_$ = $('.form-toggle')) === null || _$ === void 0 ? void 0 : _$.classList.add('visible');\n    (_$2 = $('.form-panel.one')) === null || _$2 === void 0 ? void 0 : _$2.classList.add('hidden');\n    (_$3 = $('.form-panel.two')) === null || _$3 === void 0 ? void 0 : _$3.classList.add('active');\n\n    if (Form) {\n      Form.animate({\n        height: [`${formHeight}px`, `${panelTwo}px`]\n      }, {\n        duration: 500,\n        // number in ms [this would be equiv of your speed].\n        easing: 'ease-in-out',\n        iterations: 1 // infinity or a number.\n        // fill: ''\n\n      });\n      Form.style.height = `${panelTwo}px`;\n    }\n  };\n\n  const handleToggle = () => {\n    var _$4, _$5, _$6;\n\n    const formPanelOne = $('.form-panel.one');\n    const panelOne = formPanelOne === null || formPanelOne === void 0 ? void 0 : formPanelOne.clientHeight;\n    const Form = $('.form');\n    const formHeight = Form === null || Form === void 0 ? void 0 : Form.clientHeight;\n    (_$4 = $('.form-toggle')) === null || _$4 === void 0 ? void 0 : _$4.classList.remove('visible');\n    (_$5 = $('.form-panel.one')) === null || _$5 === void 0 ? void 0 : _$5.classList.remove('hidden');\n    (_$6 = $('.form-panel.two')) === null || _$6 === void 0 ? void 0 : _$6.classList.remove('active');\n\n    if (Form) {\n      Form.animate({\n        height: [`${formHeight}px`, `${panelOne}px`]\n      }, {\n        duration: 500,\n        // number in ms [this would be equiv of your speed].\n        direction: 'normal',\n        easing: 'ease-in-out',\n        iterations: 1 // infinity or a number.\n        // fill: ''\n\n      });\n      Form.style.height = `${panelOne}px`;\n    }\n  };\n\n  const handleSubmit = useCallback(async data => {\n    try {\n      var _formRef$current;\n\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n      const schema = Yup.object().shape({\n        email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail válido'),\n        password: Yup.string().required('Senha é obrigatória')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await signIn({\n        email: data.email,\n        password: data.password\n      });\n      addToast({\n        type: 'success',\n        title: 'Logado com sucesso!',\n        description: 'Bem vindo ao Profitfy.me!'\n      });\n      history.push('/dashboard');\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      }\n\n      addToast({\n        type: 'error',\n        title: 'Erro na autenticação',\n        description: 'Ocorreu um error ao fazer login, cheque as credenciais.'\n      });\n    }\n  }, [signIn, addToast, history]);\n  const handleRegister = useCallback(async data => {\n    try {\n      var _formRef$current3;\n\n      (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.setErrors({});\n      const schema = Yup.object().shape({\n        name: Yup.string().required('Nome é obrigatório'),\n        lastname: Yup.string().required('Sobrenome é obirgatório'),\n        email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail válido'),\n        phone: Yup.string().required('O telefone é obrigatório'),\n        password: Yup.string().min(6, 'No mínimo 6 dígitos'),\n        passwordConfirmation: Yup.string().oneOf([Yup.ref('password'), null], 'Confirmação incorreta')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await api.post('/account/create', data);\n      handleToggle();\n      addToast({\n        type: 'success',\n        title: 'Cadastro realizado!',\n        description: 'Você já pode fazer seu logon no Profitfy.me!'\n      });\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current4;\n\n        const errors = getValidationErrors(err);\n        (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 ? void 0 : _formRef$current4.setErrors(errors);\n        return;\n      }\n\n      addToast({\n        type: 'error',\n        title: 'Erro na cadastro',\n        description: 'Ocorreu um error ao fazer cadastro, tente novamente.'\n      });\n    }\n  }, [addToast, history]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    style: {\n      height: 325,\n      width: 325,\n      marginLeft: -35\n    },\n    alt: \"Logo Profitfy.me\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Text, {\n    text: \"Seu dashboard de respeito!\",\n    size: 1.2,\n    color: \"#FFFFFF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Content, {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-toggle\",\n    onClick: handleToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-panel one\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, \"Fazer Login\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    ref: formRef,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"email\",\n    icon: FiMail,\n    placeholder: \"E-mail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    icon: FiLock,\n    type: \"password\",\n    placeholder: \"Senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-remember\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }), \"Lembrar-me\", /*#__PURE__*/React.createElement(\"a\", {\n    className: \"form-recovery\",\n    href: \"/#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"Esqueci minha senha\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, \"Entrar\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-panel two\",\n    onClick: handleFormPanelTwo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, \"Fazer cadastro\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    ref: formRef,\n    onSubmit: handleRegister,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputSignUp, {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Nome\",\n    icon: BsFillPersonFill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputSignUp, {\n    type: \"text\",\n    name: \"lastname\",\n    placeholder: \"Sobrenome\",\n    icon: MdAccountCircle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputMasked, {\n    mask: \"(99) 99999-9999\",\n    icon: Brazil,\n    type: \"text\",\n    name: \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputSignUp, {\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"E-mail\",\n    icon: MdEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputSignUp, {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Senha\",\n    icon: FaUnlockAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputSignUp, {\n    type: \"password\",\n    name: \"passwordConfirmation\",\n    placeholder: \"Confirmar Senha\",\n    icon: FaUnlockAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: airplaneIcon,\n    alt: \"airplane icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }\n  }), \"Cadastrar\"))))));\n};\n\nexport default AccountLog;","map":{"version":3,"sources":["/Users/viniciusprudencio/Desktop/development/other-programs/desafio/desafio-fullstack/packages/frontend/src/presentation/pages/AccountLog/index.tsx"],"names":["React","useRef","useContext","useCallback","useAuth","useToast","Form","BsFillPersonFill","MdAccountCircle","MdEmail","FaUnlockAlt","FiMail","FiLock","Yup","api","useHistory","ThemeContext","getValidationErrors","Input","InputSignUp","InputMasked","Text","Container","Title","Content","Button","AccountLog","signIn","history","addToast","formRef","theme","colors","$","elem","window","document","querySelector","handleFormPanelTwo","formPanelTwo","panelTwo","scrollHeight","formHeight","clientHeight","classList","add","animate","height","duration","easing","iterations","style","handleToggle","formPanelOne","panelOne","remove","direction","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","password","validate","abortEarly","type","title","description","push","err","ValidationError","errors","handleRegister","name","lastname","phone","min","passwordConfirmation","oneOf","ref","post","logoImg","width","marginLeft","Brazil","airplaneIcon"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext, useCallback, FormEvent } from 'react'\nimport { useAuth } from '../../hooks/auth'\nimport { useToast } from '../../hooks/toast'\nimport { FormHandles } from '@unform/core'\nimport { Form } from '@unform/web'\nimport { BsFillPersonFill } from 'react-icons/bs'\nimport { MdAccountCircle } from 'react-icons/md'\nimport { MdEmail } from 'react-icons/md'\nimport { FaUnlockAlt } from 'react-icons/fa'\n\nimport { FiLogIn, FiMail, FiLock } from 'react-icons/fi'\n\nimport logoImg from '../../assets/logo/internal-logo/profitfy_logo.svg'\nimport airplaneIcon from '../../assets/images/icons/paper-airplane.svg'\nimport Brazil from '../../assets/images/icons/brazil.svg'\n\nimport * as Yup from 'yup'\nimport api from '../../../infra/services/http/api'\nimport { useHistory } from 'react-router-dom'\nimport { ThemeContext } from 'styled-components'\nimport getValidationErrors from '../../../validation/yup/getValidationErrors'\n\nimport Input from '../../components/Input'\nimport InputSignUp from '../../components/InputSignUp'\nimport InputMasked from '../../components/InputMasked'\nimport Text from '../../components/Text'\nimport { Container, Title, Content, Button } from './styles'\n\nimport InputSignIn from '../../components/InputSignIn'\n\ninterface SignUpFormData {\n  name: string\n  email: string\n  lastname: string\n  phone: string\n  password: string\n  passwordConfirmation: string\n}\n\ninterface SignInFormData {\n  email: string\n  password: string\n}\n\nconst AccountLog: React.FC = () => {\n  const { signIn } = useAuth()\n\n  const history = useHistory()\n  const { addToast } = useToast()\n\n  const formRef = useRef<FormHandles>(null)\n\n  const theme = useContext(ThemeContext).colors\n  const $ = (elem: string): HTMLElement | null => window.document.querySelector<HTMLElement>(elem)\n\n  const handleFormPanelTwo = async () => {\n    const formPanelTwo = $('.form-panel.two')\n    const panelTwo = formPanelTwo?.scrollHeight\n    const Form = $('.form')\n    const formHeight = Form?.clientHeight\n\n    $('.form-toggle')?.classList.add('visible')\n    $('.form-panel.one')?.classList.add('hidden')\n    $('.form-panel.two')?.classList.add('active')\n\n    if (Form) {\n      Form.animate({\n        height: [`${formHeight}px`, `${panelTwo}px`]\n      }, {\n        duration: 500, // number in ms [this would be equiv of your speed].\n        easing: 'ease-in-out',\n        iterations: 1 // infinity or a number.\n        // fill: ''\n      })\n\n      Form.style.height = `${panelTwo}px`\n    }\n  }\n\n  const handleToggle = () => {\n    const formPanelOne = $('.form-panel.one')\n    const panelOne = formPanelOne?.clientHeight\n    const Form = $('.form')\n    const formHeight = Form?.clientHeight\n\n    $('.form-toggle')?.classList.remove('visible')\n    $('.form-panel.one')?.classList.remove('hidden')\n    $('.form-panel.two')?.classList.remove('active')\n\n    if (Form) {\n      Form.animate({\n        height: [`${formHeight}px`, `${panelOne}px`]\n      }, {\n        duration: 500, // number in ms [this would be equiv of your speed].\n        direction: 'normal',\n        easing: 'ease-in-out',\n        iterations: 1 // infinity or a number.\n        // fill: ''\n      })\n\n      Form.style.height = `${panelOne}px`\n    }\n  }\n\n  const handleSubmit = useCallback(\n    async (data: SignInFormData) => {\n      try {\n        formRef.current?.setErrors({})\n\n        const schema = Yup.object().shape({\n          email: Yup.string()\n            .required('E-mail é obrigatório')\n            .email('Digite um e-mail válido'),\n          password: Yup.string().required('Senha é obrigatória'),\n        })\n\n        await schema.validate(data, { abortEarly: false })\n\n        await signIn({\n          email: data.email,\n          password: data.password,\n        })\n\n        addToast({\n          type: 'success',\n          title: 'Logado com sucesso!',\n          description: 'Bem vindo ao Profitfy.me!',\n        })\n\n        history.push('/dashboard')\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErrors(err)\n\n          formRef.current?.setErrors(errors)\n          return;\n        }\n\n        addToast({\n          type: 'error',\n          title: 'Erro na autenticação',\n          description:\n            'Ocorreu um error ao fazer login, cheque as credenciais.',\n        })\n      }\n    },\n    [signIn, addToast, history],\n  )\n\n  const handleRegister = useCallback(\n    async (data: SignUpFormData) => {\n      try {\n        formRef.current?.setErrors({})\n\n        const schema = Yup.object().shape({\n          name: Yup.string().required('Nome é obrigatório'),\n          lastname: Yup.string().required('Sobrenome é obirgatório'),\n          email: Yup.string()\n            .required('E-mail é obrigatório')\n            .email('Digite um e-mail válido'),\n          phone: Yup.string().required('O telefone é obrigatório'),\n          password: Yup.string().min(6, 'No mínimo 6 dígitos'),\n          passwordConfirmation: Yup.string().oneOf(\n            [Yup.ref('password'), null],\n            'Confirmação incorreta')\n        })\n\n        await schema.validate(data, { abortEarly: false })\n\n        await api.post('/account/create', data)\n\n        handleToggle()\n\n        addToast({\n          type: 'success',\n          title: 'Cadastro realizado!',\n          description: 'Você já pode fazer seu logon no Profitfy.me!',\n        })\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErrors(err)\n\n          formRef.current?.setErrors(errors)\n          return\n        }\n\n        addToast({\n          type: 'error',\n          title: 'Erro na cadastro',\n          description: 'Ocorreu um error ao fazer cadastro, tente novamente.',\n        })\n      }\n    },\n    [addToast, history],\n  )\n\n  return (\n    <Container>\n      <Title>\n        <img src={logoImg} style={{ height: 325, width: 325, marginLeft: -35 }} alt=\"Logo Profitfy.me\" />\n        <br />\n        <Text text=\"Seu dashboard de respeito!\" size={1.2} color=\"#FFFFFF\" />\n      </Title>\n\n      <Content className=\"form\">\n        <div className=\"form-toggle\" onClick={handleToggle}></div>\n        <div className=\"form-panel one\">\n          <div className=\"form-header\">\n            <h1>Fazer Login</h1>\n          </div>\n          <div className=\"form-content\">\n            <Form ref={formRef} onSubmit={handleSubmit}>\n              <Input name=\"email\" icon={FiMail} placeholder=\"E-mail\" />\n\n              <Input\n                name=\"password\"\n                icon={FiLock}\n                type=\"password\"\n                placeholder=\"Senha\"\n              />\n\n              <label className=\"form-remember\">\n                <input type=\"checkbox\"/>Lembrar-me\n                <a className=\"form-recovery\" href=\"/#\">Esqueci minha senha</a>\n              </label>\n\n              <Button type=\"submit\">Entrar</Button>\n            </Form>\n          </div>\n        </div>\n        <div className=\"form-panel two\" onClick={handleFormPanelTwo}>\n          <div className=\"form-header\">\n            <h1>Fazer cadastro</h1>\n          </div>\n          <div className=\"form-content\">\n            <Form ref={formRef} onSubmit={handleRegister} >\n              <InputSignUp\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Nome\"\n                icon={BsFillPersonFill}\n              />\n\n              <InputSignUp\n                type=\"text\"\n                name=\"lastname\"\n                placeholder=\"Sobrenome\"\n                icon={MdAccountCircle}\n              />\n\n              <InputMasked mask=\"(99) 99999-9999\" icon={Brazil} type=\"text\" name=\"phone\"/>\n             {/* <InputSignUp\n                type=\"text\"\n                name=\"phone\"\n                placeholder=\"Telefone\"\n                icon={AiTwotonePhone}\n              /> */}\n\n              <InputSignUp\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"E-mail\"\n                icon={MdEmail}\n              />\n\n              <InputSignUp\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Senha\"\n                icon={FaUnlockAlt}\n              />\n\n              <InputSignUp\n                type=\"password\"\n                name=\"passwordConfirmation\"\n                placeholder=\"Confirmar Senha\"\n                icon={FaUnlockAlt}\n              />\n\n              <Button type=\"submit\">\n                <img src={airplaneIcon} alt=\"airplane icon\"/>\n                Cadastrar\n              </Button>\n            </Form>\n          </div>\n        </div>\n      </Content>\n    </Container>\n  )\n}\n\nexport default AccountLog\n"]},"metadata":{},"sourceType":"module"}